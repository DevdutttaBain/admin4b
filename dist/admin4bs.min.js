$.fn.inputSuggestion=function(){return this.each(function(){var t=$(this),n=t.closest(".input-suggestion"),e=n.find(".input-suggestion-list"),i=e.find(t.attr("data-item")).parent(),a=e.find(t.attr("data-empty")).hide(),o=t.attr("data-event")||"focus",r=[];function s(n){return t.is("[data-text]")&&(n=n.find(t.attr("data-text"))),n.text().trim()}function c(){i.children().removeClass("active"),n.addClass("open"),r.forEach(function(t){var n=t.data("prev");n.length?t.insertAfter(n):i.prepend(t)}),r=[],i.children().each(function(){var n=$(this);n.is(t.attr("data-item"))&&!s(n).contains(t.val())&&(r.push(n),n.data("prev",n.prev()))}),r.forEach(function(t){t.detach()}),i.children(t.attr("data-item")).length?a.hide():a.show()}t.on("keydown",function(e){var a=e.keyCode||e.which,o=keyboard(a);if(o.isArrowUp()||o.isArrowDown()){if(e.preventDefault(),!n.is(".open"))return void c();var r=i.find(".active");if(!r.length)return void i.children(t.attr("data-item")).eq(0).addClass("active");if(o.isArrowDown()){var s=r.next();s.is(t.attr("data-item"))&&(r.removeClass("active"),s.addClass("active"))}if(o.isArrowUp()){var u=r.prev();u.is(t.attr("data-item"))&&(r.removeClass("active"),u.addClass("active"))}}}),t.on("keypress",function(t){var n=t.keyCode||t.which;keyboard(n).isEnter()&&i.children(".active").length&&i.find(".active").trigger("click")}),t.on("keyup",function(t){var e=t.keyCode||t.which;keyboard(e).isEscape()&&n.removeClass("open")}),t.on(o,function(){c()}).on("input-suggestion:load",function(){i.children().on("click",function(){t.val(s($(this))),t.trigger("input-suggestion:change",this),n.removeClass("open")})}),n.onFocusOut(function(){n.removeClass("open")}),t.trigger("input-suggestion:load")})},$(function(){$('[data-toggle="sidebar"]').on("click",function(){$(".app-sidebar").addClass("sidebar-open")}),$('[data-dismiss="sidebar"]').on("click",function(){$(".app-sidebar").removeClass("sidebar-open")})}),$.fn.onFocusOut=function(t){var n=$(this),e=$(document);return this.each(function(){function i(e){$(e.target).closest(n).length||"function"==typeof t&&t.call(this)}e.on("click",i),e.find("input").on("focus",i),e.find("select").on("focus",i),e.find("textarea").on("focus",i),e.find("button").on("focus",i),e.find("a").on("focus",i)})},window.keyboard=function(t){return this.isArrowDown=function(){return 40===t},this.isArrowUp=function(){return 38===t},this.isEnter=function(){return 13===t},this.isEscape=function(){return 27===t},this},String.prototype.contains=function(t){return new RegExp(t,"i").test(this)},String.prototype.replaceAll=function(t,n){return this.replace(new RegExp(t,"g"),n)};